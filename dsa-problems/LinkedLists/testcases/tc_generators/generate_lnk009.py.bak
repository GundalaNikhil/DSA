import sys
import random

class ListNode:
    def __init__(self, val=0):
        self.val = val
        self.next = None

def reverse_segment(head, count):
    prev, curr = None, head
    for _ in range(count):
        if not curr:
            break
        next_node = curr.next
        curr.next = prev
        prev = curr
        curr = next_node
    return prev, head, curr

def reverse_from_offset(head: ListNode, k: int, s: int):
    if not head or k <= 0 or s < 0:
        return head
    dummy = ListNode(0)
    dummy.next = head
    prev = dummy
    for _ in range(s):
        if not prev.next:
            return dummy.next
        prev = prev.next
    if not prev.next:
        return dummy.next
    new_head, old_head, rest = reverse_segment(prev.next, k)
    prev.next = new_head
    old_head.next = rest
    return dummy.next

def list_to_array(h):
    r = []
    while h:
        r.append(h.val)
        h = h.next
    return r

def array_to_list(a):
    if not a:
        return None
    d = ListNode()
    c = d
    for v in a:
        c.next = ListNode(v)
        c = c.next
    return d.next

def solve(v, k, s):
    h = array_to_list(v)
    result = reverse_from_offset(h, k, s)
    return list_to_array(result) if result else []

def make_test_case(v, k, s):
    n = len(v)
    result = solve(v, k, s)
    inp = f"{n}\n{' '.join(map(str, v))}\n{k}\n{s}"
    out = ' '.join(map(str, result)) if result else ""
    return inp, out

def print_case(c):
    print("  - input: |-")
    for line in c["input"].split("\n"):
        print(f"      {line}")
    print("    output: |-")
    for line in c["output"].split("\n"):
        print(f"      {line}")

def main():
    test_cases = {"problem_id": "LNK_ROBOTICS_CHUNK_REVERSE_OFFSET_COUNT__6394", "samples": [], "public": [], "hidden": []}
    
    test_cases["samples"].append({"input": *make_test_case([1,2,3,4,5], 2, 1)})
    test_cases["samples"].append({"input": *make_test_case([1,2,3,4,5,6], 3, 0)})
    
    for v,k,s in [([1],1,0), ([1,2],1,1), (list(range(1,11)),3,2), (list(range(1,6)),10,0)]:
        test_cases["public"].append({"input": *make_test_case(v,k,s)})
    
    for _ in range(13):
        n = random.randint(1, 50)
        v = [random.randint(-50,50) for _ in range(n)]
        k = random.randint(1, n+5)
        s = random.randint(0, n)
        test_cases["hidden"].append({"input": *make_test_case(v,k,s)})
    
    test_cases["hidden"].append({"input": *make_test_case(list(range(1,10001)), 500, 100)})
    test_cases["hidden"].append({"input": *make_test_case(list(range(1,100001)), 5000, 1000)})
    
    print(f"problem_id: {test_cases['problem_id']}")
    print("samples:")
    for c in test_cases["samples"]:
        print_case(c)
    print("\npublic:")
    for c in test_cases["public"]:
        print_case(c)
    print("\nhidden:")
    for c in test_cases["hidden"]:
        print_case(c)

if __name__ == "__main__":
    main()
