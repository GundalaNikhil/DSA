<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRE-010: Helicopter View</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root { --sky: #1e90ff; --heli: #2c3e50; --gold: #f1c40f; --seen: #27ae60; --hidden: #95a5a6; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Orbitron', sans-serif; background: linear-gradient(180deg, var(--sky) 0%, #87ceeb 50%, #98d8c8 100%); min-height: 100vh; }
        header { background: var(--heli); padding: 15px; text-align: center; color: #fff; }
        h1 { color: var(--gold); font-size: 1.6rem; }
        main { padding: 20px; max-width: 900px; margin: 0 auto; }
        .aerial-view { background: rgba(255,255,255,0.2); border-radius: 15px; padding: 30px; position: relative; min-height: 350px; }
        .helicopter { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); font-size: 3rem; animation: hover 2s ease-in-out infinite; z-index: 100; }
        @keyframes hover { 0%,100% { transform: translateX(-50%) translateY(0); } 50% { transform: translateX(-50%) translateY(-10px); } }
        .scan-line { position: absolute; top: 60px; left: 0; right: 0; height: 4px; background: var(--gold); opacity: 0.7; animation: scan 3s linear infinite; }
        @keyframes scan { 0% { top: 60px; } 100% { top: calc(100% - 20px); } }
        .tree-container { display: flex; flex-direction: column; align-items: center; gap: 25px; margin-top: 50px; }
        .tree-level { display: flex; gap: 20px; }
        .building { width: 50px; height: 50px; background: var(--hidden); border-radius: 5px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; font-weight: bold; color: #fff; cursor: pointer; transition: all 0.3s; }
        .building.visible { background: var(--seen); box-shadow: 0 0 15px var(--gold); animation: reveal 0.5s ease; }
        @keyframes reveal { 0% { transform: scale(0.5); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
        .controls { display: flex; gap: 15px; justify-content: center; margin-top: 20px; }
        .btn { padding: 15px 25px; border: none; border-radius: 10px; font-family: 'Orbitron', sans-serif; font-size: 0.9rem; cursor: pointer; }
        .btn-scan { background: var(--gold); color: #333; }
        .btn-reset { background: var(--heli); color: #fff; }
        .btn:hover { transform: scale(1.05); }
        .view-display { background: rgba(255,255,255,0.95); border-radius: 15px; padding: 20px; margin-top: 20px; text-align: center; }
        .view-title { color: var(--heli); font-weight: bold; margin-bottom: 15px; }
        .view-nodes { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
        .view-node { background: var(--seen); color: #fff; padding: 10px 20px; border-radius: 10px; font-weight: bold; font-size: 1.2rem; }
        #message { text-align: center; color: #fff; padding: 10px; font-size: 1rem; text-shadow: 1px 1px 2px rgba(0,0,0,0.3); }
    </style>
</head>
<body>
<header>
    <h1>üöÅ HELICOPTER VIEW</h1>
</header>
<main>
    <div id="message">Scan from above to see which buildings are visible!</div>
    <div class="aerial-view">
        <div class="helicopter">üöÅ</div>
        <div class="scan-line"></div>
        <div class="tree-container" id="tree"></div>
    </div>
    <div class="controls">
        <button class="btn btn-scan" onclick="game.scan()">üì° SCAN TOP VIEW</button>
        <button class="btn btn-reset" onclick="game.reset()">üîÑ RESET</button>
    </div>
    <div class="view-display">
        <div class="view-title">üëÅÔ∏è VISIBLE FROM TOP</div>
        <div class="view-nodes" id="view"></div>
    </div>
</main>
<script>
class HelicopterView {
    constructor() {
        this.tree = { val: 1, left: { val: 2, left: { val: 4 }, right: { val: 5 } }, right: { val: 3, right: { val: 7 } } };
        this.render();
    }
    render() {
        const container = document.getElementById('tree');
        container.innerHTML = '';
        const levels = [[{ node: this.tree, col: 0 }]];
        let queue = [{ node: this.tree, col: 0 }];
        while (queue.length) {
            const next = [];
            queue.forEach(({ node, col }) => {
                if (node.left) next.push({ node: node.left, col: col - 1 });
                if (node.right) next.push({ node: node.right, col: col + 1 });
            });
            if (next.length) levels.push(next);
            queue = next;
        }
        levels.forEach(level => {
            const row = document.createElement('div');
            row.className = 'tree-level';
            level.forEach(({ node, col }) => {
                const el = document.createElement('div');
                el.className = 'building';
                el.id = `building-${node.val}`;
                el.dataset.col = col;
                el.textContent = node.val;
                row.appendChild(el);
            });
            container.appendChild(row);
        });
    }
    getTopView() {
        const colMap = {};
        const queue = [{ node: this.tree, col: 0 }];
        while (queue.length) {
            const { node, col } = queue.shift();
            if (!(col in colMap)) colMap[col] = node.val;
            if (node.left) queue.push({ node: node.left, col: col - 1 });
            if (node.right) queue.push({ node: node.right, col: col + 1 });
        }
        return Object.entries(colMap).sort((a, b) => parseInt(a[0]) - parseInt(b[0])).map(e => e[1]);
    }
    async scan() {
        document.querySelectorAll('.building').forEach(b => b.classList.remove('visible'));
        document.getElementById('view').innerHTML = '';
        document.getElementById('message').textContent = 'üì° Scanning from above...';
        const topView = this.getTopView();
        for (const val of topView) {
            const el = document.getElementById(`building-${val}`);
            el.classList.add('visible');
            const viewNode = document.createElement('span');
            viewNode.className = 'view-node';
            viewNode.textContent = val;
            document.getElementById('view').appendChild(viewNode);
            await this.delay(500);
        }
        document.getElementById('message').innerHTML = `<span style="color:var(--gold)">üéâ Top view: ${topView.join(' ‚Üí ')}</span>`;
    }
    reset() {
        document.querySelectorAll('.building').forEach(b => b.classList.remove('visible'));
        document.getElementById('view').innerHTML = '';
        document.getElementById('message').textContent = 'Click SCAN to see top view!';
    }
    delay(ms) { return new Promise(r => setTimeout(r, ms)); }
}
const game = new HelicopterView();
</script>
</body>
</html>
