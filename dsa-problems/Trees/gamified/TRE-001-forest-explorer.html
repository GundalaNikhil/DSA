<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRE-001: Forest Explorer</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root { --forest: #228b22; --sky: #87ceeb; --bark: #8b4513; --gold: #ffd700; --leaf: #32cd32; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Fredoka', sans-serif; background: linear-gradient(180deg, var(--sky) 0%, #98d8c8 100%); min-height: 100vh; overflow-x: hidden; }
        header { background: var(--forest); padding: 15px; text-align: center; color: #fff; border-bottom: 4px solid var(--bark); }
        h1 { font-size: 1.8rem; text-shadow: 2px 2px 0 var(--bark); }
        .stats { display: flex; justify-content: center; gap: 30px; margin-top: 10px; }
        .stat { background: rgba(0,0,0,0.2); padding: 5px 15px; border-radius: 20px; }
        main { padding: 20px; max-width: 900px; margin: 0 auto; }
        .forest-scene { position: relative; background: linear-gradient(180deg, transparent 0%, rgba(34,139,34,0.3) 100%); min-height: 400px; border-radius: 20px; padding: 20px; }
        .tree-container { display: flex; flex-direction: column; align-items: center; gap: 30px; }
        .tree-level { display: flex; gap: 20px; justify-content: center; }
        .tree-node { width: 60px; height: 60px; background: var(--leaf); border: 4px solid var(--forest); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold; color: #fff; position: relative; cursor: pointer; transition: all 0.3s; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .tree-node:hover { transform: scale(1.1); }
        .tree-node.visited { background: var(--gold); color: #333; animation: bounce 0.5s; }
        .tree-node.current { box-shadow: 0 0 20px var(--gold); animation: pulse 1s infinite; }
        @keyframes bounce { 0%,100% { transform: scale(1); } 50% { transform: scale(1.2); } }
        @keyframes pulse { 0%,100% { box-shadow: 0 0 20px var(--gold); } 50% { box-shadow: 0 0 40px var(--gold); } }
        .tree-node .collect { position: absolute; top: -20px; font-size: 1.2rem; animation: float 1s ease-out forwards; opacity: 0; }
        @keyframes float { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-30px); } }
        .edge { position: absolute; background: var(--bark); height: 4px; transform-origin: left center; }
        .hiker { position: absolute; font-size: 2rem; transition: all 0.5s ease; z-index: 100; filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.3)); }
        .controls { display: flex; gap: 10px; justify-content: center; margin-top: 20px; flex-wrap: wrap; }
        .btn { padding: 15px 25px; border: none; border-radius: 30px; font-family: 'Fredoka', sans-serif; font-size: 1rem; cursor: pointer; transition: all 0.2s; }
        .btn-pre { background: #e74c3c; color: #fff; }
        .btn-in { background: #3498db; color: #fff; }
        .btn-post { background: #9b59b6; color: #fff; }
        .btn-reset { background: #95a5a6; color: #fff; }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .path-display { background: rgba(255,255,255,0.9); border-radius: 15px; padding: 15px; margin-top: 20px; text-align: center; }
        .path-title { color: var(--forest); font-weight: 600; margin-bottom: 10px; }
        .path-nodes { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
        .path-node { padding: 8px 15px; background: var(--gold); border-radius: 10px; font-weight: bold; animation: slideIn 0.3s ease; }
        @keyframes slideIn { from { opacity: 0; transform: scale(0); } to { opacity: 1; transform: scale(1); } }
        #message { text-align: center; padding: 15px; font-size: 1.2rem; color: var(--forest); min-height: 50px; }
    </style>
</head>
<body>
<header>
    <h1>üå≤ FOREST EXPLORER</h1>
    <div class="stats">
        <div class="stat">üçÑ Score: <span id="score">0</span></div>
        <div class="stat">üìç Nodes: <span id="visited">0</span>/7</div>
    </div>
</header>
<main>
    <div id="message">Guide the hiker through the forest! Choose a traversal order.</div>
    <div class="forest-scene">
        <div class="hiker" id="hiker">üßó</div>
        <div class="tree-container" id="tree"></div>
    </div>
    <div class="controls">
        <button class="btn btn-pre" onclick="game.traverse('preorder')">üî¥ Preorder</button>
        <button class="btn btn-in" onclick="game.traverse('inorder')">üîµ Inorder</button>
        <button class="btn btn-post" onclick="game.traverse('postorder')">üü£ Postorder</button>
        <button class="btn btn-reset" onclick="game.reset()">üîÑ Reset</button>
    </div>
    <div class="path-display">
        <div class="path-title">üó∫Ô∏è PATH TRAVELED</div>
        <div class="path-nodes" id="path"></div>
    </div>
</main>
<script>
class ForestExplorer {
    constructor() {
        this.tree = { val: 1, left: { val: 2, left: { val: 4 }, right: { val: 5 } }, right: { val: 3, left: { val: 6 }, right: { val: 7 } } };
        this.score = 0;
        this.visitedCount = 0;
        this.positions = {};
        this.isRunning = false;
        this.render();
    }
    render() {
        const container = document.getElementById('tree');
        container.innerHTML = '';
        const levels = [[this.tree], [this.tree.left, this.tree.right], [this.tree.left?.left, this.tree.left?.right, this.tree.right?.left, this.tree.right?.right]];
        levels.forEach((level, li) => {
            const row = document.createElement('div');
            row.className = 'tree-level';
            level.forEach((node, ni) => {
                if (node) {
                    const el = document.createElement('div');
                    el.className = 'tree-node';
                    el.id = `node-${node.val}`;
                    el.textContent = node.val;
                    row.appendChild(el);
                    setTimeout(() => {
                        const rect = el.getBoundingClientRect();
                        const containerRect = container.getBoundingClientRect();
                        this.positions[node.val] = { x: rect.left - containerRect.left + 30, y: rect.top - containerRect.top + 30 };
                    }, 100);
                }
            });
            container.appendChild(row);
        });
        this.moveHiker(1);
    }
    moveHiker(val) {
        const hiker = document.getElementById('hiker');
        const pos = this.positions[val];
        if (pos) { hiker.style.left = (pos.x - 15) + 'px'; hiker.style.top = (pos.y - 40) + 'px'; }
    }
    async traverse(order) {
        if (this.isRunning) return;
        this.isRunning = true;
        this.reset();
        const path = [];
        const collect = (node) => {
            if (!node) return;
            if (order === 'preorder') { path.push(node.val); collect(node.left); collect(node.right); }
            else if (order === 'inorder') { collect(node.left); path.push(node.val); collect(node.right); }
            else { collect(node.left); collect(node.right); path.push(node.val); }
        };
        collect(this.tree);
        document.getElementById('message').textContent = `üö∂ Walking ${order} path...`;
        for (const val of path) {
            await this.visitNode(val);
            await this.delay(600);
        }
        document.getElementById('message').innerHTML = `<span style="color:var(--gold)">üéâ ${order.toUpperCase()} complete! Score: ${this.score}</span>`;
        this.isRunning = false;
    }
    async visitNode(val) {
        this.moveHiker(val);
        const el = document.getElementById(`node-${val}`);
        el.classList.add('visited');
        const emoji = document.createElement('span');
        emoji.className = 'collect';
        emoji.textContent = 'üçÑ+10';
        el.appendChild(emoji);
        this.score += 10;
        this.visitedCount++;
        document.getElementById('score').textContent = this.score;
        document.getElementById('visited').textContent = this.visitedCount;
        const pathEl = document.getElementById('path');
        const node = document.createElement('span');
        node.className = 'path-node';
        node.textContent = val;
        pathEl.appendChild(node);
    }
    reset() {
        this.score = 0;
        this.visitedCount = 0;
        document.getElementById('score').textContent = 0;
        document.getElementById('visited').textContent = 0;
        document.getElementById('path').innerHTML = '';
        document.querySelectorAll('.tree-node').forEach(n => { n.classList.remove('visited'); n.querySelectorAll('.collect').forEach(c => c.remove()); });
        document.getElementById('message').textContent = 'Choose a traversal order!';
        this.moveHiker(1);
    }
    delay(ms) { return new Promise(r => setTimeout(r, ms)); }
}
const game = new ForestExplorer();
</script>
</body>
</html>
