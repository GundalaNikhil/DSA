<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STC-006: LCP Builder</title>
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #2c3e50;
            --text: #ecf0f1;
            --accent: #e74c3c;
            --match: #2ecc71;
        }

        body {
            font-family: 'Source Code Pro', monospace;
            background: var(--bg);
            color: var(--text);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        h1 { color: var(--accent); margin-top: 2rem; }

        .suffix-display {
            margin-top: 2rem;
            padding: 20px;
            background: #34495e;
            border-radius: 10px;
        }

        .suffix-row {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 5px 0;
            font-size: 1.2rem;
        }

        .rank { width: 30px; color: #95a5a6; }
        .suffix-text { flex: 1; }

        .lcp-input {
            width: 40px;
            height: 30px;
            text-align: center;
            font-family: inherit;
            font-size: 1rem;
            border: 2px solid #7f8c8d;
            background: #2c3e50;
            color: #fff;
            border-radius: 5px;
        }
        .lcp-input.correct { border-color: var(--match); background: #27ae60; }
        .lcp-input.wrong { border-color: #c0392b; background: #e74c3c; }

        .highlight { background: var(--match); color: #000; }

        .btn {
            margin-top: 2rem;
            padding: 10px 30px;
            background: var(--accent);
            border: none;
            color: #fff;
            font-family: inherit;
            cursor: pointer;
            border-radius: 5px;
        }

        .status { margin-top: 1rem; min-height: 1.5em; }

    </style>
</head>
<body>

<h1>LCP ARRAY BUILDER</h1>
<div style="color:#95a5a6">Enter the Longest Common Prefix length between consecutive suffixes.</div>

<div class="suffix-display" id="display"></div>

<button class="btn" onclick="check()">VERIFY</button>
<div class="status" id="status"></div>

<script>
    const STR = "banana";
    // SA: a, ana, anana, banana, na, nana
    // Indices: 5, 3, 1, 0, 4, 2
    // LCP: -, 1, 3, 0, 0, 2
    
    let suffixes = [];
    let lcpSolution = [];

    function init() {
        // Compute suffix array
        const n = STR.length;
        suffixes = Array.from({length: n}, (_, i) => ({ idx: i, text: STR.substring(i) }));
        suffixes.sort((a, b) => a.text.localeCompare(b.text));

        // Compute LCP
        lcpSolution = [0];
        for (let i = 1; i < n; i++) {
            let lcp = 0;
            const s1 = suffixes[i - 1].text;
            const s2 = suffixes[i].text;
            while (lcp < Math.min(s1.length, s2.length) && s1[lcp] === s2[lcp]) lcp++;
            lcpSolution.push(lcp);
        }

        render();
    }

    function render() {
        const div = document.getElementById('display');
        div.innerHTML = '';

        suffixes.forEach((s, i) => {
            const row = document.createElement('div');
            row.className = 'suffix-row';

            const rank = document.createElement('span');
            rank.className = 'rank';
            rank.textContent = i;

            const text = document.createElement('span');
            text.className = 'suffix-text';
            text.textContent = s.text;

            const inp = document.createElement('input');
            inp.className = 'lcp-input';
            inp.type = 'number';
            inp.min = 0;
            inp.max = s.text.length;
            inp.id = `lcp-${i}`;
            if (i === 0) {
                inp.value = '-';
                inp.disabled = true;
                inp.style.background = '#555';
            }

            row.appendChild(rank);
            row.appendChild(text);
            row.appendChild(inp);
            div.appendChild(row);
        });
    }

    function check() {
        let allCorrect = true;
        for (let i = 1; i < suffixes.length; i++) {
            const inp = document.getElementById(`lcp-${i}`);
            const val = parseInt(inp.value);
            if (val === lcpSolution[i]) {
                inp.classList.remove('wrong');
                inp.classList.add('correct');
            } else {
                inp.classList.remove('correct');
                inp.classList.add('wrong');
                allCorrect = false;
            }
        }

        const status = document.getElementById('status');
        status.textContent = allCorrect ? "ALL CORRECT!" : "Some values are incorrect.";
        status.style.color = allCorrect ? "#2ecc71" : "#e74c3c";
    }

    window.onload = init;
</script>
</body>
</html>
