<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STK-015: Pancake Tower</title>
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #fff3e0; --pancake: #e6b17e; --butter: #ffd54f; --plate: #eeeeee; }
        * { box-sizing: border-box; }
        body { font-family: 'Patrick Hand', cursive; background: var(--bg); color: #5d4037; margin: 0; min-height: 100vh; display: flex; flex-direction: column; align-items: center; }

        header { padding: 20px; font-size: 2rem; }

        .kitchen {
            width: 100%; max-width: 900px; height: 500px; display: flex; align-items: flex-end; gap: 20px; overflow-x: auto;
            border-bottom: 20px solid #8d6e63; padding: 20px;
        }

        .plate-stack {
            min-width: 150px; height: 300px; border-bottom: 5px solid #ccc; position: relative;
            display: flex; flex-direction: column-reverse; align-items: center; justify-content: flex-start;
        }
        
        .pancake {
            height: 25px; background: var(--pancake); border-radius: 10px; border: 2px solid #a1887f;
            display: flex; justify-content: center; margin-bottom: -5px; width: 100px;
            box-shadow: 0 2px 2px rgba(0,0,0,0.1); animation: drop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-size: 0.8rem; align-items: center;
        }
        @keyframes drop { from{transform:translateY(-100px)} to{transform:translateY(0)} }

        .pancake::after { content:''; width: 20px; height: 5px; background: var(--butter); border-radius: 2px; position: absolute; top:-2px; }

        .controls { display: flex; gap: 20px; margin-top: 20px; }
        .btn { padding: 15px 40px; font-size: 1.5rem; border: none; background: #ff7043; color: #fff; cursor: pointer; border-radius: 50px; font-family: inherit; }
        .btn:hover { background: #f4511e; }
        .btn-eat { background: #8d6e63; }

        .msg { font-size: 1.5rem; margin-top: 10px; color: #ff5722; }
    </style>
</head>
<body>
<header>STK-015 PANCAKE TOWER (Set of Stacks)</header>
<div class="msg" id="msg">Keep stacking! Max 5 per plate.</div>

<div class="kitchen" id="kitchen"></div>

<div class="controls">
    <button class="btn" onclick="game.add()">ðŸ¥ž SERVE</button>
    <button class="btn btn-eat" onclick="game.eat()">ðŸ˜‹ EAT</button>
</div>

<script>
class Game {
    constructor() {
        this.limit = 5;
        this.stacks = [[]]; // Start with 1 stack
        this.ui = { kitchen: document.getElementById('kitchen'), msg: document.getElementById('msg') };
        this.render();
    }

    add() {
        let last = this.stacks[this.stacks.length-1];
        if (last.length >= this.limit) {
            this.stacks.push([]); // New Stack
            last = this.stacks[this.stacks.length-1];
            this.msg("Plate full! Starting new stack.");
        } else {
            this.msg("");
        }
        
        let id = Math.floor(Math.random()*100);
        last.push(id);
        
        this.render();
    }

    eat() {
        let last = this.stacks[this.stacks.length-1];
        if (last.length === 0 && this.stacks.length > 1) {
            this.stacks.pop();
            last = this.stacks[this.stacks.length-1];
        }
        
        if (last.length > 0) {
            last.pop();
            this.msg("Yum!");
        } else {
            this.msg("All pancakes eaten!");
        }
        
        // Clean empty stacks if mid-game
        if (last.length === 0 && this.stacks.length > 1) this.stacks.pop();
        
        this.render();
    }

    render() {
        this.ui.kitchen.innerHTML = '';
        this.stacks.forEach((stk, i) => {
            let pDiv = document.createElement('div');
            pDiv.className = 'plate-stack';
            
            stk.forEach(p => {
                let cake = document.createElement('div');
                cake.className = 'pancake';
                // Random width variation
                cake.style.width = (100 + Math.random()*40) + 'px';
                pDiv.appendChild(cake);
            });
            
            this.ui.kitchen.appendChild(pDiv);
        });
    }

    msg(t) { this.ui.msg.innerText = t; }
}
const game = new Game();
</script>
</body>
</html>
